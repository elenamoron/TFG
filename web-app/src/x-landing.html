<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">

<link rel="import" href="x-app.html">

<link rel="import" href="x-home.html">
<link rel="import" href="x-proyectos.html">
<link rel="import" href="x-clientes.html">
<link rel="import" href="x-cuenta.html">

<dom-module id="x-landing">

  <template>


    <app-location route="{{route}}" use-hash-as-path></app-location>
    <app-route
            route="{{route}}"
            pattern="/:page"
            data="{{routeData}}"
            tail="{{subroute}}"
            active="{{active}}">
    </app-route>

    <iron-pages
            selected="[[routeData.page]]"
            attr-for-selected="name"
            selected-attribute="visible">
      <x-app name="app" route="{{subroute}}" basepath="{{routeData.page}}"></x-app>
           <x-proyectos name="proyectos"></x-proyectos>
           <x-clientes name="clientes"></x-clientes>
           <x-cuenta name="cuenta"></x-cuenta>
    </iron-pages>
  </template>



  <script>

    Polymer({

      is: 'x-landing',


      properties: {
        route: Object,
        routeData: Object,
        page: {
          type: String,
          reflectToAttribute: true,
          observer: '_pageChanged',
        }
      },
      observers: [
        '_routePageChanged(routeData.page)',
      ],


      _routePageChanged: function(page) {
        this.page = page ;
      },
      _pageChanged: function(page) {
        if(!page){
          return;
        }
        // Load page import on demand. Show 404 page if fails
        //var resolvedPageUrl = this.resolveUrl('x-' + page + '.html');
        //this.importHref(resolvedPageUrl, null, this._showPage404, true);
      },
      _showPage404: function() {
        this.page = 'view404';
      },

    });

  </script>

</dom-module>
